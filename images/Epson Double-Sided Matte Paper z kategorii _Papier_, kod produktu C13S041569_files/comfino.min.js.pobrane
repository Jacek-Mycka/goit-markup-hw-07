var ComfinoProductWidget=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(n){var o,i,r,a;function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}a=void 0!==n?n:this.window||this.global,i=[],o=function(e){"use strict";var t,n={},o=!!document.querySelector&&!!e.addEventListener,i=null,r=!1,a=!1,l={widgetKey:null,priceSelector:null,widgetTargetSelector:null,priceObserverSelector:null,priceObserverLevel:0,price:null,numOfInstallments:0,type:"simple",offerType:"INSTALLMENTS_ZERO_PERCENT",embedMethod:"INSERT_INTO_LAST",pluginVersion:"[unknown version]",callbackBefore:function(){},callbackAfter:function(){},onOfferRendered:function(e,t,n){},onGetPriceElement:function(e,t){return null},debugMode:!1},s={COMFINO_API_HOST:"//api-ecommerce.comfino.pl",COMFINO_HOST:"//widget.comfino.pl",COMFINO_PORT:"",COMFINO_PATH:""},m=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)},f=function(e){return s.COMFINO_HOST+(""!==s.COMFINO_PORT?":"+s.COMFINO_PORT:"")+(""!==s.COMFINO_PATH?s.COMFINO_PATH:"/")+e},u=function(e,t,n){return n?e.insertBefore(t,e.firstChild):e.insertBefore(t,null)},g=function(e){var t="rat";return 1===e?t="rata":(e<10||e>20)&&[2,3,4].includes(Number(String(e).slice(-1)))&&(t="raty"),t},p=function(e){var t=(e=e||window.event).target||e.srcElement;t.hasAttribute("data-toggle")&&"comfino-modal-window"===t.getAttribute("data-toggle")&&t.hasAttribute("data-target")&&(document.getElementById(t.getAttribute("data-target")).classList.add("comfino-widget-open"),e.preventDefault()),(t.hasAttribute("data-dismiss")&&"close-comfino-modal-window"===t.getAttribute("data-dismiss")||t.classList.contains("comfino-widget-modal"))&&(document.querySelector('[class="comfino-widget-modal comfino-widget-open"]').classList.remove("comfino-widget-open"),e.preventDefault())},v=function(e,t){var n,o,i,r,a,d=[];switch("error"!==t&&"warn"!==t?(d.push("%cComfino widget:%c "+e),d.push("color: white; background-color: #227b34; font-weight: bold; line-height: 18px"),d.push("color: black; background-color: #cae8c9; font-weight: normal; line-height: 18px")):d.push("Comfino widget: "+e),arguments.length>2&&d.push.apply(d,c(Array.from(arguments).slice(2,arguments.length))),t){case"error":(n=console).error.apply(n,d);break;case"warn":(o=console).warn.apply(o,d);break;case"info":(i=console).info.apply(i,d);break;case"debug":(r=console).debug.apply(r,d);break;case"log":default:(a=console).log.apply(a,d)}},w=function(e){if(!a&&n.getPrice()){var t=document.getElementsByClassName("comfino-widget");t.length&&t[0].parentNode.removeChild(t[0]),n.fetchData()}},y=function(e){var n=document.querySelector(e);return n?((i=new MutationObserver(w)).observe(n,{characterData:!0,subtree:!0,childList:!0}),t.debugMode&&v("Price element observer initialized with priceObserverSelector: "+t.priceObserverSelector,"info",n)):t.debugMode&&v("Price element observer not initialized with priceObserverSelector: "+t.priceObserverSelector,"warn"),n},b=function(){var e=n.getPriceElement();if(e){if(t.priceObserverSelector&&""!==t.priceObserverSelector&&y(t.priceObserverSelector))return;var o=e;if(t.priceObserverLevel>0)for(var r=0;r<t.priceObserverLevel;r++)o=o.parentNode;(i=new MutationObserver(w)).observe(o,{characterData:!0,subtree:!0,childList:!0}),t.debugMode&&v("Price element observer initialized with priceObserverLevel: "+t.priceObserverLevel,"info",o)}else t.debugMode&&(v("Price element observer not initialized with priceObserverLevel: "+t.priceObserverLevel,"warn"),v("Price element not found.","warn")),t.priceObserverSelector&&""!==t.priceObserverSelector?y(t.priceObserverSelector):v("Comfino widget: priceObserverSelector option not set.","warn")};return n.fetchData=function(){if(t.price)if(t.widgetKey){var e=(100*t.price).toFixed(0),o="//api-ecommerce.comfino.pl"+("with-modal"===t.type?"/widget/financial-products":"/widget/best-possible-loan-parameters")+"?loanAmount="+e+"&loanType="+t.offerType+"&loanTerm="+t.numOfInstallments+"&widgetKey="+t.widgetKey;fetch(o).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){return n.template(e)})).catch((function(e){e.json().then((function(n){v("Comfino widget: API error ["+n.message+"]","error"),t.debugMode&&401===e.status&&v("Comfino widget key is invalid: "+t.widgetKey,"info")}))}))}else v("Comfino widget: widgetKey option not set.","warn")},n.getPriceElement=function(){var e=t.onGetPriceElement(t.priceSelector,t.priceObserverSelector);return e||(t.priceSelector?!(e=document.querySelector(t.priceSelector))&&t.debugMode&&v('Price element pointed by selector "'+t.priceSelector+'" not found.',"warn"):v("priceSelector option not set.","warn"),e)},n.getPrice=function(){if(a&&t.price)return!0;var e,o=n.getPriceElement();if(o&&(e=o.innerText,t.debugMode&&v('Price element found. Price string: "'+e+'"',"info")),e){var i=e.split(" "),r="";for(var c in i){var d=i[c].replace(/[^.,0-9\-]+/g,"").replace(",",".");if(""===d)break;r+=d}t.debugMode&&v('Price string parsed: "'+r+'"',"info");var l=parseFloat(parseFloat(r.replace(/\.(?=.*\.)/g,"")).toFixed(2));if(t.debugMode&&v('Price string casted to float and rounded: "'+l+'"',"info"),l!==t.price)return t.price=l,!0}return!1},n.template=function(e){var o;if(!e||Array.isArray(e)&&!e.length)v("API response is empty for offer type "+t.offerType+".","warn");else if(t.widgetTargetSelector)if(o=document.querySelector(t.widgetTargetSelector),t.debugMode&&v("Widget rendering started.","info"),o){if(!r){t.debugMode&&v("Widget initialization started.","info");var i=document.getElementsByTagName("head")[0],a=document.createElement("link");a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet"),a.setAttribute("href",f("css/comfino.css")),i.appendChild(a),t.debugMode&&(v("Widget CSS linked: "+f("css/comfino.css"),"info"),v("Widget initialization finished.","info"))}var c,d="";switch("scb"===e.creditorName&&t.price<=2e4&&"CONVENIENT_INSTALLMENTS"===t.offerType?d="Niskie raty - pierwsza za 60 dni":"COMPANY_BNPL"===t.offerType&&(d="Kupujesz teraz, płacisz nawet za 60 dni"),t.debugMode&&v("Widget rendering: "+t.type+", "+t.embedMethod,"info",o),t.type){case"mixed":c='<div class="comfino-widget">',c+=""!==d?'<div class="comfino-widget-panel comfino-widget-hint">'+d+"</div>":"",c+='<img src="'+f("image/comfino/banners/"+t.offerType.toLowerCase()+".svg")+'" class="comfino-widget-banner">',c+='<div class="comfino-widget-panel">',c+='<div class="comfino-widget-panel">',"COMPANY_BNPL"!==t.offerType&&(c+='<div class="comfino-widget-panel__value">',c+='<span id="comfino-widget-monthly-installment">'+n.format(e.instalmentAmount/100)+"</span> zł",c+="</div>",c+=" x ",c+='<div class="comfino-widget-panel__period">',c+='<span id="comfino-widget-period">'+e.loanTerm+'</span> <span id="comfino-widget-period-suffix">'+g(e.loanTerm)+"</span>",c+="</div>"),c+="</div>",c+="</div>",c+="</div>";break;case"with-modal":c='<div class="comfino-widget">',c+=""!==d?'<div class="comfino-widget-panel comfino-widget-hint">'+d+"</div>":"",c+='<a href="#"><img src="'+f("image/comfino/banners/"+t.offerType.toLowerCase()+".svg")+'" class="comfino-widget-banner" data-target="comfino-modal-window" data-toggle="comfino-modal-window"></a>',c+='<div class="comfino-widget-panel">',c+='<div class="comfino-widget-panel">',"COMPANY_BNPL"!==t.offerType&&(c+='<div class="comfino-widget-panel__value">',c+='<span id="comfino-widget-monthly-installment">'+n.format(e.instalmentAmount/100)+"</span> zł",c+="</div>",c+=" x ",c+='<div class="comfino-widget-panel__period">',c+='<span id="comfino-widget-period">'+e.loanTerm+'</span> <span id="comfino-widget-period-suffix">'+g(e.loanTerm)+"</span>",c+="</div>"),c+="</div>",c+='<a class="comfino-widget-panel__button" href="#" data-target="comfino-modal-window" data-toggle="comfino-modal-window"></a>',c+="</div>",c+="</div>";break;case"simple":c='<div class="comfino-widget">',c+=""!==d?'<div class="comfino-widget-panel comfino-widget-hint">'+d+"</div>":"",c+='<div class="comfino-widget-panel">',c+='<div class="comfino-widget-panel">',"COMPANY_BNPL"!==t.offerType&&(c+='<div class="comfino-widget-panel__value">',c+='<span id="comfino-widget-monthly-installment">'+n.format(e.instalmentAmount/100)+"</span> zł",c+="</div>",c+=" x ",c+='<div class="comfino-widget-panel__period">',c+='<span id="comfino-widget-period">'+e.loanTerm+'</span> <span id="comfino-widget-period-suffix">'+g(e.loanTerm)+"</span>",c+="</div>"),c+="</div>",c+="</div>",c+="</div>"}var l,s,m=(new DOMParser).parseFromString(c,"text/html");switch(t.embedMethod){case"INSERT_INTO_FIRST":m=u(o,m.body.firstChild,!0);break;case"INSERT_INTO_LAST":m=u(o,m.body.firstChild,!1);break;case"INSERT_BEFORE":l=o,s=m.body.firstChild,m=l.parentNode.insertBefore(s,l);break;case"INSERT_AFTER":m=function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)}(o,m.body.firstChild)}if("with-modal"===t.type){if(!document.getElementById("comfino-modal-window")){var p=document.createElement("div");p.setAttribute("id","comfino-modal-window"),p.setAttribute("class","comfino-widget-modal"),document.body.appendChild(p)}n.modalTemplate(e)}t.debugMode&&v("Widget rendering finished.","info"),r=!0,t.onOfferRendered(e,o,m)}else v('Widget target element pointed by selector "'+t.widgetTargetSelector+'" not found.',"warn");else v("widgetTargetSelector option not set.","warn")},n.modalTemplate=function(e){if(r){document.getElementById("comfino-widget-instalment-amount").innerHTML=n.format(e.instalmentAmount/100)+" zł",document.getElementById("comfino-widget-summary-total").innerHTML=n.format(e.toPay/100)+" zł",document.getElementById("comfino-widget-rrso").innerHTML=n.format(100*e.rrso)+"%";var o="";e.loanParameters.forEach((function(t,n){0===n?o+='<div class="comfino-widget-select-box">':n%3==0&&(o+='</div><div class="comfino-widget-select-box">'),e.loanTerm===t.loanTerm?o+='<div data-term="'+t.loanTerm+'" class="comfino-active comfino-widget-installments-quantity">'+t.loanTerm+"</div>":o+='<div data-term="'+t.loanTerm+'" class="comfino-widget-installments-quantity">'+t.loanTerm+"</div>",n===e.loanParameters.length-1&&(o+="</div>")}));var i=document.getElementById("comfino-widget-quantity-select");i.innerHTML=o,i.querySelectorAll("div.comfino-widget-installments-quantity").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),n.selectTerm(t.target,e)}))}))}else{var a='<div class="comfino-widget-modal-window comfino-widget-small">';a+='<div class="comfino-widget-box">',a+='<div class="comfino-widget-close-btn comfino-widget-close" data-dismiss="close-comfino-modal-window">x</div>',a+='<div class="comfino-widget-header">',a+='<img src="'+f("image/comfino/comfino_logo.svg")+'" alt="" class="comfino-widget-logo">',a+='<div class="comfino-widget-title">Wybrany sposób płatności</div>',a+="</div>",a+="<main>",a+='<section class="comfino-widget-select-payment">',a+='<div class="comfino-widget-single-payment">',a+='<img src="'+f("image/comfino/icons/"+e.type.toLowerCase()+".svg")+'" class="comfino-widget-offer-icon" alt=""> <span id="comfino-widget-offer-name" class="comfino-widget-single-payment__text">'+e.name+"</span>",a+="</div>",a+="</section>",a+='<section class="comfino-widget-installments-box">',"COMPANY_BNPL"!==t.offerType?a+='<div class="comfino-widget-installments-title">Kalkulacja raty miesięcznej: <span id="comfino-widget-instalment-amount">'+n.format(e.instalmentAmount/100)+" zł</span></div>":a+='<div class="comfino-widget-installments-title">O ile dni chcesz odroczyć płatność?</div>',a+='<div id="comfino-widget-quantity-select" class="comfino-widget-quantity-select">',e.loanParameters.forEach((function(t,n){0===n?a+='<div class="comfino-widget-select-box">':n%3==0&&(a+='</div><div class="comfino-widget-select-box">'),e.loanTerm===t.loanTerm?a+='<div data-term="'+t.loanTerm+'" class="comfino-active comfino-widget-installments-quantity">'+t.loanTerm+"</div>":a+='<div data-term="'+t.loanTerm+'" class="comfino-widget-installments-quantity">'+t.loanTerm+"</div>",n===e.loanParameters.length-1&&(a+="</div>")})),a+="</div>",a+="</section>",a+='<section class="comfino-widget-summary-box">',"COMPANY_BNPL"!==t.offerType?(a+='<div class="comfino-widget-summary-total">Łączna kwota do spłaty: <span id="comfino-widget-summary-total">'+n.format(e.toPay/100)+" zł</span></div>",a+='<div class="comfino-widget-rrso">RRSO <span id="comfino-widget-rrso">'+n.format(100*e.rrso)+"%</span></div>"):(a+='<div class="comfino-widget-summary-total">Łączna kwota do zapłaty: <span id="comfino-widget-summary-total">'+n.format(e.toPay/100)+" zł</span></div>",a+='<div class="comfino-widget-rrso">Prowizja operatora: <span id="comfino-widget-rrso">'+n.format((e.toPay-(100*t.price).toFixed(0))/100)+" zł</span></div>"),a+="</section>",a+="</main>",a+="</div>",a+="</div>";var c=(new DOMParser).parseFromString(a,"text/html");c.querySelectorAll("div > div.comfino-widget-installments-quantity").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),n.selectTerm(t.target,e)}))})),document.getElementById("comfino-modal-window").appendChild(c.body.firstChild)}},n.selectTerm=function(e,o){if(document.getElementById("comfino-widget-quantity-select").querySelectorAll("div > div.comfino-widget-installments-quantity").forEach((function(e){e.classList.remove("comfino-active")})),null!==e){e.classList.add("comfino-active");var i,r=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=d(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){a=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(a)throw i}}}}(o.loanParameters);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.loanTerm===parseInt(e.dataset.term)){document.getElementById("comfino-widget-offer-name").innerHTML=o.name,document.getElementById("comfino-widget-summary-total").innerHTML=n.format(a.toPay/100)+" zł","COMPANY_BNPL"!==t.offerType?(document.getElementById("comfino-widget-monthly-installment").innerHTML=n.format(a.instalmentAmount/100),document.getElementById("comfino-widget-instalment-amount").innerHTML=n.format(a.instalmentAmount/100)+" zł",document.getElementById("comfino-widget-rrso").innerHTML=n.format(100*a.rrso)+"%",document.getElementById("comfino-widget-period").innerHTML=a.loanTerm,document.getElementById("comfino-widget-period-suffix").innerHTML=g(a.loanTerm)):document.getElementById("comfino-widget-rrso").innerHTML=n.format((a.toPay-(100*t.price).toFixed(0))/100)+" zł";break}}}catch(e){r.e(e)}finally{r.f()}}},n.fetchOffers=function(){n.getPrice()&&n.fetchData()},n.format=function(e){return parseFloat(e).toFixed(2).toString().replace(".",",")},n.destroy=function(){if(t){null!==i&&i.disconnect(),t=null,i=null,document.removeEventListener("click",p,!1);var e=document.getElementsByClassName("comfino-widget");e.length&&e[0].parentNode.removeChild(e[0])}},n.init=function(e){o?(n.destroy(),t=function(e,t){var n={};return m(e,(function(t,o){n[o]=e[o]})),m(t,(function(e,o){n[o]=t[o]})),n}(l,e||{}),"ON"===sessionStorage.getItem("COMFINO_DEBUG")&&(t.debugMode=!0),t.price&&("number"!=typeof t.price&&(t.price=parseFloat(t.price)),a=!0),s.COMFINO_URL=f(""),t.debugMode&&v("Debug mode activated.","info"),document.addEventListener("click",p,!1),"loading"!==document.readyState?(t.callbackBefore(),b(),n.fetchOffers(),t.callbackAfter()):document.addEventListener("DOMContentLoaded",(function(){t.callbackBefore(),b(),n.fetchOffers(),t.callbackAfter()})),t.debugMode&&v("Widget renderer for Comfino plugin "+t.pluginVersion+" initialized.","info",t,s)):v("Browser API is obsolete and does not support querySelector and addEventListener methods.","error")},n}(a),void 0===(r="function"==typeof o?o.apply(t,i):o)||(e.exports=r)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]);